<html>
     <head>
     	<meta http-equiv="Content-type" content="text/html; charset=utf-8">
     	<title>3. Running Selenium RC Tests</title>
     	<link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" title="Ref" charset="utf-8">
     </head>
	<body class="body">
		<h1><a name="3. Running Selenium RC Tests">3. Running Selenium RC Tests</a></h1>Selenium tests are placed in <code>test/selenium</code> and are executed as part of the functional test phase with the standard <code>grails test-app</code> or <code>grails test-app functional:</code> commands. As with unit and integration tests you can run individual tests or groups of tests by specifying the test names without the <em class="italic">"Tests"</em> suffix. Again, like unit and integration tests you can use <code>grails test-app -rerun</code> to rerun failing tests.<p class="paragraph"/>In Grails 1.2+ you can use the new syntax to isolate Selenium tests from other test types. For example <code>grails test-app :selenium</code> or <code>grails test-app functional:selenium</code><p class="paragraph"/>The plugin will automatically start Selenium Server and Selenium instances at the start of the suite and close them down cleanly at the end so your tests do not need to (and indeed should not) do so.<p class="paragraph"/><h3>Capturing screenshots on test failures</h3><p class="paragraph"/>By setting <code>selenium.screenshot.onFail</code> to <code>true</code> in your <code>SeleniumConfig.groovy</code> file you can have Selenium capture a screenshot when any test fails. By default screenshots are saved to <code>target/test-reports/screenshots</code> and named according to the test case and test that failed.<p class="paragraph"/><blockquote class="warning">
Selenium's screenshot functionality is imperfect. It does not grab an image of the browser window but of the entire desktop. This may be useful so long as the browser that Selenium is driving is visible (i.e. not hidden behind other windows) when the screenshot is taken.
</blockquote>
<h2><a name="3.1. Browser Support">3.1. Browser Support</a></h2>The table below summarises browser/OS combinations that the plugin has been tested with and any issues known to exist with particular combinations. Please note these are likely issues of the Selenium library or the underlying browser rather than anything the plugin can do anything about.
<table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th><strong class="bold">Browser</strong></th><th><strong class="bold">selenium.browser</strong></th><th><strong class="bold">OS</strong></th><th><strong class="bold">Comments</strong></th></tr><tr class="table-odd"><td>Firefox 3</td><td><code>&#42;firefox</code></td><td>Linux</td><td>Works perfectly.</td></tr><tr class="table-even"><td>Firefox 3.5</td><td><code>&#42;firefox</code></td><td>Linux</td><td>Works perfectly.</td></tr><tr class="table-odd"><td>Firefox 3.5</td><td><code>&#42;firefox</code></td><td>OSX 10.6</td><td>Works perfectly.</td></tr><tr class="table-even"><td>Firefox 3.6</td><td><code>&#42;firefox</code></td><td>OSX 10.6</td><td>Works perfectly.</td></tr><tr class="table-odd"><td>Safari 4</td><td><code>&#42;safari</code></td><td>OSX 10.6</td><td>Multi-window mode doesn't work.</td></tr><tr class="table-even"><td>Firefox 3.5</td><td><code>&#42;firefox</code></td><td>Windows XP</td><td>Works perfectly.</td></tr><tr class="table-odd"><td>Google Chrome</td><td><code>&#42;googlechrome</code></td><td>Windows XP</td><td>Works perfectly.</td></tr><tr class="table-even"><td>Internet Explorer 6</td><td><code>&#42;iexplore</code></td><td>Windows XP</td><td>Single window mode causes JavaScript errors. Drag and drop problems.</td></tr><tr class="table-odd"><td>Internet Explorer 7</td><td><code>&#42;iexplore</code></td><td>Windows XP</td><td>See Internet Explorer 6.</td></tr><tr class="table-even"><td>Opera 9</td><td><code>&#42;opera</code></td><td>Windows XP</td><td>Works perfectly.</td></tr><tr class="table-odd"><td>Safari 4</td><td><code>&#42;safari</code></td><td>Windows XP</td><td>Multi-window mode doesn't work.</td></tr></table><p class="paragraph"/>Selenium's <code>dragAndDropToObject</code> command will fail in Internet Explorer if the target element (i.e. where you are dragging to) is outside the viewport. An imperfect workaround is to set <code>selenium.maximize</code> in <code>SeleniumConfig.groovy</code> so that the browser window is maximized on launch.<p class="paragraph"/>If you are able to add to this list, whether to report issues or confirm success with particular browser/OS combinations please contact the plugin author.
<h2><a name="3.2. Configuration">3.2. Configuration</a></h2>Installing the plugin should create an empty configuration file in <code>grails-app/conf/SeleniumConfig.groovy</code> that can be customised according to your requirements. Configuration values are:<p class="paragraph"/><table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th><strong class="bold">Key</strong></th><th><strong class="bold">Description</strong></th><th><strong class="bold">Default</strong></th></tr><tr class="table-odd"><td><code>selenium.browser</code></td><td>The browser Selenium will use</td><td><code>&#42;firefox</code> on Linux, <code>&#42;safari</code> on OSX, <code>&#42;iexplore</code> on Windows.</td></tr><tr class="table-even"><td><code>selenium.defaultTimeout</code></td><td>The timeout in milliseconds after which an <em class="italic">...AndWait</em> or <em class="italic">waitFor...</em> method will fail</td><td><code>60000</code></td></tr><tr class="table-odd"><td><code>selenium.remote</code></td><td>If set to <code>true</code> the test will run without starting the application. This is useful for running tests against an instance running on a remote host.</td><td><code>false</code></td></tr><tr class="table-even"><td><code>selenium.server.host</code></td><td>The host the Selenium Server will run on.</td><td><code>localhost</code></td></tr><tr class="table-odd"><td><code>selenium.server.port</code></td><td>The port the Selenium Server will run on.</td><td><code>4444</code></td></tr><tr class="table-even"><td><code>selenium.singleWindow</code></td><td>If <code>false</code> Selenium will run in multiple windows which can be useful if your app has frame escape code. <strong class="bold"></strong>Note:<strong class="bold"></strong> this config value is ignored when selenium.browser is <code>&#42;iexplore</code> or <code>&#42;safari</code> as certain modes do not work with those browsers.</td><td><code>true</code> on all browsers other than <code>&#42;iexplore</code></td></tr><tr class="table-odd"><td><code>selenium.slow</code></td><td>If set to <code>true</code> the Selenium tests will run slowly for debugging.</td><td><code>false</code></td></tr><tr class="table-even"><td><code>selenium.url</code></td><td>The base URL where the tests will be run.</td><td><code>grails.serverURL</code> in the main application config</td></tr><tr class="table-odd"><td><code>selenium.windowMaximize</code></td><td>If set to <code>true</code> the browser window will be maximized when opened. Has no effect in single window mode.</td><td><code>false</code></td></tr><tr class="table-even"><td><code>selenium.screenshot.dir</code></td><td>The directory where screenshots will be stored.</td><td><code>target/test-reports/screenshots</code></td></tr><tr class="table-odd"><td><code>selenium.screenshot.onFail</code></td><td>If set to <code>true</code> a screenshot will be taken when a test fails.</td><td><code>false</code></td></tr><tr class="table-even"><td><code>selenium.userExtensions</code></td><td>The path to an optional user extension JavaScript file.</td><td>None</td></tr></table><p class="paragraph"/><h3>Environment specific configuration</h3><p class="paragraph"/>Environment specific configuration can be included in <code>SeleniumConfig.groovy</code> just as it can in Grails' regular <code>Config.groovy</code> file. For example:<p class="paragraph"/><div class="code"><pre>selenium &#123;
	server &#123;
	    host = <span class="java&#45;quote">"localhost"</span>
	    port = 1234
	&#125;
&#125;
environments &#123;
    test &#123;
        selenium.server.host = <span class="java&#45;quote">"www.pirates.bv"</span>
        selenium.server.port = 5678
    &#125;
&#125;</pre></div><p class="paragraph"/><h3>Using system properties</h3><p class="paragraph"/>All configuration values can be overridden using system properties. This is probably most useful for overriding the browser used on individual developers' machines or continuous integration environments. For example to run Selenium tests using Firefox instead of your platform's default browser you can use <code>grails -Dselenium.browser=&#42;firefox test-app</code> directly on the command line.<p class="paragraph"/>To make such settings permanent on an individual machine add the required settings to the <code>JAVA_OPTS</code> environment variable. For example, add <code>export JAVA_OPTS="$JAVA_OPTS -Dselenium.browser=&#42;firefox"</code> to your <code>~/.profile</code> file (Windows environment variables are set in the <em class="italic">Advanced</em> tab of the <em class="italic">System Properties</em> window).

	</body>
</html>