<html>
	<head>
		  <title>selenium-rc 1.0.1 - Reference Documentation</title>
		  <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" title="Style" charset="utf-8">	
	</head>
    <body class="body">
		<div id="header">
				<div class="images"><br><br>
				   <a href="http://grails.org"  target="_blank"><img alt="The Grails Framework" src="../img/grails.png" border="0"></a>
				   <span style="right:30px; top:20px; position:absolute;">
					<a href="../index.html" target="_top">Frames</a> | <a href="index.html" target="_top">No Frames</a><br><br>
                     <a alt="SpringSource - A Division of VMware" href="http://springsource.com" target="_blank"><img src="../img/springsource-logo.png" border="0"></a>					
					</span>					
				</div>
				<div class="message">selenium-rc</div>
				<h1>selenium-rc - Reference Documentation</h1>
				<p><strong>Authors:</strong> Rob Fletcher</p>
				<p><strong>Version:</strong> 1.0.1</p>				
				<em></em>
		</div>                       
		
		<div id="toc">  
			<h2>Table of Contents</h2>
			<div class="tocItem" style="margin-left:0px"><a href="#1. Introduction">1. Introduction</a></div><div class="tocItem" style="margin-left:0px"><a href="#2. Getting Started">2. Getting Started</a></div><div class="tocItem" style="margin-left:10px"><a href="#2.1. The SeleniumAware Mixin">2.1. The SeleniumAware Mixin</a></div><div class="tocItem" style="margin-left:10px"><a href="#2.2. Enhancements to Selenium">2.2. Enhancements to Selenium</a></div><div class="tocItem" style="margin-left:0px"><a href="#3. Running Selenium RC Tests">3. Running Selenium RC Tests</a></div><div class="tocItem" style="margin-left:10px"><a href="#3.1. Browser Support">3.1. Browser Support</a></div><div class="tocItem" style="margin-left:10px"><a href="#3.2. Configuration">3.2. Configuration</a></div><div class="tocItem" style="margin-left:0px"><a href="#4. Using Page Objects">4. Using Page Objects</a></div><div class="tocItem" style="margin-left:10px"><a href="#4.1. Writing Page Object Classes">4.1. Writing Page Object Classes</a></div><div class="tocItem" style="margin-left:10px"><a href="#4.2. Supplied Page Object Classes">4.2. Supplied Page Object Classes</a></div><div class="tocItem" style="margin-left:0px"><a href="#5. Data Driving Selenium Tests">5. Data Driving Selenium Tests</a></div><div class="tocItem" style="margin-left:0px"><a href="#6. Other Test Frameworks">6. Other Test Frameworks</a></div><div class="tocItem" style="margin-left:0px"><a href="#7. Extending GrailsSeleniumTestCase">7. Extending GrailsSeleniumTestCase</a></div><div class="tocItem" style="margin-left:0px"><a href="#8. Selenium RC and Continuous Integration">8. Selenium RC and Continuous Integration</a></div>
		</div>     
		<div id="content">
			<h1><a name="1. Introduction">1. Introduction</a></h1>The Selenium RC plugin aims to make <a href="http://seleniumhq.org/projects/remote-control/" target="blank">Selenium RC</a> a first class functional testing option for Grails.<p class="paragraph"/><h3>Source Code</h3><p class="paragraph"/>Source code for the plugin is hosted on <a href="http://github.com/robfletcher/grails-selenium-rc" target="blank">GitHub</a> - Please feel free to fork the project and submit pull requests back to the trunk.<p class="paragraph"/><h3>Bugs and Feature Requests</h3><p class="paragraph"/>Please raise bugs and feature requests against <a href="http://jira.codehaus.org/browse/GRAILSPLUGINS/component/14229" target="blank">Grails-Selenium-RC on JIRA</a><p class="paragraph"/><h3>Roadmap</h3>
<ul class="star">
<li>Upgrade to Selenium 2.0 / WebDriver</li>
<li>Support <a href="http://selenium-grid.seleniumhq.org/" target="blank">Selenium Grid</a></li>
<li>Support for other testing frameworks such as <a href="http://www.easyb.org/" target="blank">EasyB</a></li>
</ul><p class="paragraph"/><h3>Changelog</h3>
<h4>Version 1.0.1</h4>
<ul class="star">
<li>Fixes a bug in Windows if the test report dir path contains backslashes</li>
</ul><p class="paragraph"/><h4>Version 1.0</h4>
<ul class="star">
<li>Optionally capture screenshot on test case failure</li>
<li>Selenium interface is decorated with <em class="italic">waitFor&#42;</em> and <em class="italic">&#42;AndWait</em> methods</li>
<li>Selenium runner's context text is set correctly at the start of each test</li>
<li>Firefox 3.6 and Firefox on OSX support via Selenium Server 1.0.3</li>
<li>Specify JavaScript user extensions via config and invoke user extension methods directly from Groovy</li>
<li>Optionally use <code>-remote</code> instead of config or system properties to run in remote mode</li>
</ul><p class="paragraph"/><h4>Version 0.2</h4>
<ul class="star">
<li>Added base classes for using the page object pattern with standard Grails pages</li>
<li>Added <code>selenium.remote</code> config option to allow tests to be run against a remote host</li>
<li>The config <code>selenium.slowResources</code> is now simply <code>selenium.slow</code> instead</li>
</ul><p class="paragraph"/><h4>Version 0.1.1</h4>
<ul class="star">
<li>Can now negate dynamic <em class="italic">assert/verify/waitFor</em> calls in <code>GrailsSeleniumTestCase</code></li>
<li>Fixed default Selenium URL to respect <code>server.port</code> setting, etc.</li>
<li>Fixed contextPath handling when <code>grails.app.context</code> is set in Config</li>
<li>Removed <code>ArrayCategory</code> class causing <code>VerifyError</code> in some odd circumstances</li>
</ul><p class="paragraph"/><h4>Version 0.1</h4>
<ul class="star">
<li>Initial release</li>
</ul><p class="paragraph"/><h1><a name="2. Getting Started">2. Getting Started</a></h1><h3>Installation</h3><p class="paragraph"/>The Selenium RC plugin can be installed by entering <code>grails install-plugin selenium-rc</code> at the command line. Alternatively in Grails 1.3 you can add the plugin as a dependency to your application's <code>BuildConfig.groovy</code> file:<p class="paragraph"/><div class="code"><pre>grails.project.dependency.resolution = &#123;
	repositories &#123;
		// &#8230; repositories defined here
		grailsCentral() // <span class="java&#45;keyword">this</span> repository is required <span class="java&#45;keyword">for</span> plugin resolution
	&#125;
	dependencies &#123;
		// &#8230; jar dependencies defined here
	&#125;
	plugins &#123;
		test <span class="java&#45;quote<a href="selenium&#45;rc:1.0"</span>">></a>
	&#125;
&#125;</pre></div><p class="paragraph"/><h3>Writing Selenium RC Tests</h3><p class="paragraph"/>Selenium tests should be placed under the <code>test/selenium</code> directory. As with other test types you can use packages to group your tests if you wish.<p class="paragraph"/><blockquote class="warning">
You should <em class="italic">not</em> extend any of the base test classes in the Selenium API such as <a href="http://release.seleniumhq.org/selenium-remote-control/1.0-beta-2/doc/java/com/thoughtworks/selenium/SeleneseTestCase.html" target="blank">SeleneseTestCase</a> or <a href="http://release.seleniumhq.org/selenium-remote-control/1.0-beta-2/doc/java/com/thoughtworks/selenium/GroovySeleneseTestCase.html" target="blank">GroovySeleneseTestCase</a> as these tests will attempt to create a separate Selenium instance (and open another browser window) for every single test! The plugin starts a Selenium instance for you when <code>grails test-app</code> runs the functional test phase. Your tests simply need to connect to that running Selenium instance.
</blockquote>
<h2><a name="2.1. The SeleniumAware Mixin">2.1. The SeleniumAware Mixin</a></h2>The simplest way to write Selenium tests is to create a class that extends <a href="http://groovy.codehaus.org/gapi/groovy/util/GroovyTestCase.html" target="blank">GroovyTestCase</a> and add the <code>SeleniumAware</code> mixin that the plugin provides. The mixin class simply makes the running instance of <a href="http://release.seleniumhq.org/selenium-remote-control/1.0-beta-2/doc/java/com/thoughtworks/selenium/Selenium.html" target="blank">Selenium</a> available:<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">import</span> grails.plugins.selenium.SeleniumAware<p class="paragraph"/>@Mixin(SeleniumAware)
class HomepageTests <span class="java&#45;keyword">extends</span> GroovyTestCase &#123;
    void testHomepageLoads() &#123;
        selenium.open <span class="java&#45;quote">"/"</span>
        assertTrue selenium.isTextPresent(<span class="java&#45;quote">"Welcome to Grails"</span>)
    &#125;
&#125;</pre></div><p class="paragraph"/>References to the <code>selenium</code> property in the test will get the running <code>Selenium</code> instance from the mixin class.
<h2><a name="2.2. Enhancements to Selenium">2.2. Enhancements to Selenium</a></h2>The <code>selenium</code> property provided by the <code>SeleniumAware</code> mixin is actually an extension of the standard <a href="http://release.seleniumhq.org/selenium-remote-control/1.0-beta-2/doc/java/com/thoughtworks/selenium/Selenium.html" target="blank">Selenium</a> object that enhances it in a number of ways.<p class="paragraph"/><h3>waitFor...</h3>
<ul class="star">
<li>Any <em class="italic">is...</em> methods in <code>Selenium</code> have an equivalent <em class="italic">waitFor</em> taking the same parameters</li>
<li>Any <em class="italic">get...</em> methods in <code>Selenium</code> have an equivalent <em class="italic">waitFor</em> taking the same parameters plus an <em class="italic">'expectation'</em> String</li>
<li>Any <em class="italic">get...</em> methods in <code>Selenium</code> have an equivalent <em class="italic">waitFor</em> taking the same parameters plus a <a href="http://code.google.com/p/hamcrest/" target="blank">Hamcrest Matcher</a></li>
</ul><p class="paragraph"/><div class="code"><pre>// waitFor&#8230; equivalents of is&#8230; methods
selenium.isAlertPresent()
selenium.waitForAlertPresent()<p class="paragraph"/>selenium.isTextPresent(<span class="java&#45;quote">"My Title"</span>)
selenium.waitForTextPresent(<span class="java&#45;quote">"My Title"</span>)<p class="paragraph"/>// waitFor&#8230; equivalents of get&#8230; methods
selenium.getAlert() == <span class="java&#45;quote">"Error"</span>
selenium.waitForAlert(<span class="java&#45;quote">"Error"</span>)<p class="paragraph"/>selenium.getText(<span class="java&#45;quote">"css=h1"</span>) == <span class="java&#45;quote">"My Title"</span>
selenium.waitForText(<span class="java&#45;quote">"css=h1"</span>, <span class="java&#45;quote">"My Title"</span>)<p class="paragraph"/>// waitFor&#8230; with Hamcrest Matchers
selenium.waitForText(<span class="java&#45;quote">"css=h1"</span>, equalTo(<span class="java&#45;quote">"My Title"</span>))</pre></div><p class="paragraph"/><h3>...AndWait</h3><p class="paragraph"/>Any method can be appended with <em class="italic">AndWait</em> so that it will wait for the page to load before returning. Obviously this only makes sense on commands that trigger a page load. For example <code>selenium.clickAndWait("css=input.myButton")</code> will click the button <em class="italic">"myButton"</em> and then wait for a new page to finish loading.<p class="paragraph"/><blockquote class="note">
It is <em class="italic">not</em> necessary to add <em class="italic">AndWait</em> to the <code>open()</code> command as it already waits for the page to finish loading before returning. Also be aware that <em class="italic">AndWait</em> does <em class="italic">not</em> wait for AJAX events. To handle AJAX updates to the page you should wait for a condition such as an element appearing or some text changing.
</blockquote><p class="paragraph"/><h3>waitForPageToLoad()</h3><p class="paragraph"/>The method <code>waitForPageToLoad(String)</code> has an overridden version that requires no arguments and will use the timeout set using <code>setTimeout</code> or the default timeout specified in configuration.<p class="paragraph"/><h3>JavaScript user extensions</h3><p class="paragraph"/>Any <em class="italic">do...</em> or <em class="italic">get...</em> functions you have defined in a JavaScript user extensions file can be invoked directly from your Groovy code. The <em class="italic">do</em> prefix should be dropped on action function calls. This is consistent with how the <a href="http://seleniumhq.org/projects/ide/" target="blank">Selenium IDE</a> handles user extensions.<p class="paragraph"/><h4>User extension definitions in JavaScript</h4><p class="paragraph"/><div class="code"><pre>Selenium.prototype.doLogin = function(username, password) &#123;
	<span class="java&#45;keyword">this</span>.doType(<span class="java&#45;quote">"css=input&#91;name=j_username&#93;"</span>, username);
	<span class="java&#45;keyword">this</span>.doType(<span class="java&#45;quote">"css=input&#91;name=j_password&#93;"</span>, password);
	<span class="java&#45;keyword">this</span>.doClick(<span class="java&#45;quote">"css=input&#91;type=submit&#93;"</span>);
	<span class="java&#45;keyword">return</span> <span class="java&#45;keyword">this</span>.doWaitForPageToLoad(<span class="java&#45;keyword">this</span>.defaultTimeout);
&#125;<p class="paragraph"/>Selenium.prototype.getLoginState = function(locator) &#123;
	<span class="java&#45;keyword">return</span> <span class="java&#45;keyword">this</span>.getText(<span class="java&#45;quote">"css=.loginInfo"</span>);
&#125;;</pre></div><p class="paragraph"/><h4>Calling user extensions from Groovy</h4><p class="paragraph"/><div class="code"><pre>void testUserCanLogIn() &#123;
	selenium.open <span class="java&#45;quote">"/"</span>
	assertEquals <span class="java&#45;quote">"Not logged in"</span>, selenium.loginState<p class="paragraph"/>	selenium.open <span class="java&#45;quote">"/login"</span>
	selenium.login(<span class="java&#45;quote">"rob"</span>, <span class="java&#45;quote">"password"</span>)
	assertEquals <span class="java&#45;quote">"Logged in as rob"</span>, selenium.loginState
&#125;</pre></div><p class="paragraph"/><h3>Using ClosureEvaluatingWait directly</h3><p class="paragraph"/>The plugin uses the class <code>grails.plugins.selenium.condition.ClosureEvaluatingWait</code> to implement the <em class="italic">waitFor...</em> and <em class="italic">...AndWait</em> methods. If you want to you can use the class directly. For example:<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">import</span> <span class="java&#45;keyword">static</span> grails.plugins.selenium.condition.ClosureEvaluatingWait.waitFor<p class="paragraph"/>selenium.click(<span class="java&#45;quote">"myButton"</span>)
waitFor(<span class="java&#45;quote">"Clicking myButtonId should have updated myDiv via AJAX"</span>) &#123;
    selenium.getText(<span class="java&#45;quote">"myDiv"</span>) == <span class="java&#45;quote">"Some value"</span>
&#125;</pre></div><p class="paragraph"/>The <code>waitFor</code> method will fail if the expected condition does not hold true after the default timeout.
<h1><a name="3. Running Selenium RC Tests">3. Running Selenium RC Tests</a></h1>Selenium tests are placed in <code>test/selenium</code> and are executed as part of the functional test phase with the standard <code>grails test-app</code> or <code>grails test-app functional:</code> commands. As with unit and integration tests you can run individual tests or groups of tests by specifying the test names without the <em class="italic">"Tests"</em> suffix. Again, like unit and integration tests you can use <code>grails test-app -rerun</code> to rerun failing tests.<p class="paragraph"/>In Grails 1.2+ you can use the new syntax to isolate Selenium tests from other test types. For example <code>grails test-app :selenium</code> or <code>grails test-app functional:selenium</code><p class="paragraph"/>The plugin will automatically start Selenium Server and Selenium instances at the start of the suite and close them down cleanly at the end so your tests do not need to (and indeed should not) do so.<p class="paragraph"/><h3>Capturing screenshots on test failures</h3><p class="paragraph"/>By setting <code>selenium.screenshot.onFail</code> to <code>true</code> in your <code>SeleniumConfig.groovy</code> file you can have Selenium capture a screenshot when any test fails. By default screenshots are saved to <code>target/test-reports/screenshots</code> and named according to the test case and test that failed.<p class="paragraph"/><blockquote class="warning">
Selenium's screenshot functionality is imperfect. It does not grab an image of the browser window but of the entire desktop. This may be useful so long as the browser that Selenium is driving is visible (i.e. not hidden behind other windows) when the screenshot is taken.
</blockquote>
<h2><a name="3.1. Browser Support">3.1. Browser Support</a></h2>The table below summarises browser/OS combinations that the plugin has been tested with and any issues known to exist with particular combinations. Please note these are likely issues of the Selenium library or the underlying browser rather than anything the plugin can do anything about.
<table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th><strong class="bold">Browser</strong></th><th><strong class="bold">selenium.browser</strong></th><th><strong class="bold">OS</strong></th><th><strong class="bold">Comments</strong></th></tr><tr class="table-odd"><td>Firefox 3</td><td><code>&#42;firefox</code></td><td>Linux</td><td>Works perfectly.</td></tr><tr class="table-even"><td>Firefox 3.5</td><td><code>&#42;firefox</code></td><td>Linux</td><td>Works perfectly.</td></tr><tr class="table-odd"><td>Firefox 3.5</td><td><code>&#42;firefox</code></td><td>OSX 10.6</td><td>Works perfectly.</td></tr><tr class="table-even"><td>Firefox 3.6</td><td><code>&#42;firefox</code></td><td>OSX 10.6</td><td>Works perfectly.</td></tr><tr class="table-odd"><td>Safari 4</td><td><code>&#42;safari</code></td><td>OSX 10.6</td><td>Multi-window mode doesn't work.</td></tr><tr class="table-even"><td>Firefox 3.5</td><td><code>&#42;firefox</code></td><td>Windows XP</td><td>Works perfectly.</td></tr><tr class="table-odd"><td>Google Chrome</td><td><code>&#42;googlechrome</code></td><td>Windows XP</td><td>Works perfectly.</td></tr><tr class="table-even"><td>Internet Explorer 6</td><td><code>&#42;iexplore</code></td><td>Windows XP</td><td>Single window mode causes JavaScript errors. Drag and drop problems.</td></tr><tr class="table-odd"><td>Internet Explorer 7</td><td><code>&#42;iexplore</code></td><td>Windows XP</td><td>See Internet Explorer 6.</td></tr><tr class="table-even"><td>Opera 9</td><td><code>&#42;opera</code></td><td>Windows XP</td><td>Works perfectly.</td></tr><tr class="table-odd"><td>Safari 4</td><td><code>&#42;safari</code></td><td>Windows XP</td><td>Multi-window mode doesn't work.</td></tr></table><p class="paragraph"/>Selenium's <code>dragAndDropToObject</code> command will fail in Internet Explorer if the target element (i.e. where you are dragging to) is outside the viewport. An imperfect workaround is to set <code>selenium.maximize</code> in <code>SeleniumConfig.groovy</code> so that the browser window is maximized on launch.<p class="paragraph"/>If you are able to add to this list, whether to report issues or confirm success with particular browser/OS combinations please contact the plugin author.
<h2><a name="3.2. Configuration">3.2. Configuration</a></h2>Installing the plugin should create an empty configuration file in <code>grails-app/conf/SeleniumConfig.groovy</code> that can be customised according to your requirements. Configuration values are:<p class="paragraph"/><table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th><strong class="bold">Key</strong></th><th><strong class="bold">Description</strong></th><th><strong class="bold">Default</strong></th></tr><tr class="table-odd"><td><code>selenium.browser</code></td><td>The browser Selenium will use</td><td><code>&#42;firefox</code> on Linux, <code>&#42;safari</code> on OSX, <code>&#42;iexplore</code> on Windows.</td></tr><tr class="table-even"><td><code>selenium.defaultTimeout</code></td><td>The timeout in milliseconds after which an <em class="italic">...AndWait</em> or <em class="italic">waitFor...</em> method will fail</td><td><code>60000</code></td></tr><tr class="table-odd"><td><code>selenium.remote</code></td><td>If set to <code>true</code> the test will run without starting the application. This is useful for running tests against an instance running on a remote host.</td><td><code>false</code></td></tr><tr class="table-even"><td><code>selenium.server.host</code></td><td>The host the Selenium Server will run on.</td><td><code>localhost</code></td></tr><tr class="table-odd"><td><code>selenium.server.port</code></td><td>The port the Selenium Server will run on.</td><td><code>4444</code></td></tr><tr class="table-even"><td><code>selenium.singleWindow</code></td><td>If <code>false</code> Selenium will run in multiple windows which can be useful if your app has frame escape code. <strong class="bold"></strong>Note:<strong class="bold"></strong> this config value is ignored when selenium.browser is <code>&#42;iexplore</code> or <code>&#42;safari</code> as certain modes do not work with those browsers.</td><td><code>true</code> on all browsers other than <code>&#42;iexplore</code></td></tr><tr class="table-odd"><td><code>selenium.slow</code></td><td>If set to <code>true</code> the Selenium tests will run slowly for debugging.</td><td><code>false</code></td></tr><tr class="table-even"><td><code>selenium.url</code></td><td>The base URL where the tests will be run.</td><td><code>grails.serverURL</code> in the main application config</td></tr><tr class="table-odd"><td><code>selenium.windowMaximize</code></td><td>If set to <code>true</code> the browser window will be maximized when opened. Has no effect in single window mode.</td><td><code>false</code></td></tr><tr class="table-even"><td><code>selenium.screenshot.dir</code></td><td>The directory where screenshots will be stored.</td><td><code>target/test-reports/screenshots</code></td></tr><tr class="table-odd"><td><code>selenium.screenshot.onFail</code></td><td>If set to <code>true</code> a screenshot will be taken when a test fails.</td><td><code>false</code></td></tr><tr class="table-even"><td><code>selenium.userExtensions</code></td><td>The path to an optional user extension JavaScript file.</td><td>None</td></tr></table><p class="paragraph"/><h3>Environment specific configuration</h3><p class="paragraph"/>Environment specific configuration can be included in <code>SeleniumConfig.groovy</code> just as it can in Grails' regular <code>Config.groovy</code> file. For example:<p class="paragraph"/><div class="code"><pre>selenium &#123;
	server &#123;
	    host = <span class="java&#45;quote">"localhost"</span>
	    port = 1234
	&#125;
&#125;
environments &#123;
    test &#123;
        selenium.server.host = <span class="java&#45;quote">"www.pirates.bv"</span>
        selenium.server.port = 5678
    &#125;
&#125;</pre></div><p class="paragraph"/><h3>Using system properties</h3><p class="paragraph"/>All configuration values can be overridden using system properties. This is probably most useful for overriding the browser used on individual developers' machines or continuous integration environments. For example to run Selenium tests using Firefox instead of your platform's default browser you can use <code>grails -Dselenium.browser=&#42;firefox test-app</code> directly on the command line.<p class="paragraph"/>To make such settings permanent on an individual machine add the required settings to the <code>JAVA_OPTS</code> environment variable. For example, add <code>export JAVA_OPTS="$JAVA_OPTS -Dselenium.browser=&#42;firefox"</code> to your <code>~/.profile</code> file (Windows environment variables are set in the <em class="italic">Advanced</em> tab of the <em class="italic">System Properties</em> window).
<h1><a name="4. Using Page Objects">4. Using Page Objects</a></h1>Simple Selenium RC tests will interact directly with the <code>selenium</code> object to drive the browser. However, once you go beyond a handful of simple tests this can make your tests difficult to maintain as they are dealing with the fine-grained details of the page. Some of the problems with this approach include:
<ul class="star">
<li>Page element locators (whether XPath, CSS, element Ids, etc.) are repeated throughout the tests and have to be changed in many places when you change the page structure.</li>
<li>Multiple Selenium commands representing a single <em class="italic">logical</em> action may be repeated in several tests. Utility class that group commands together can easily get out of control and fall prey to the <a href="http://en.wikipedia.org/wiki/God_object" target="blank">God Objects</a> anti-pattern.</li>
</ul><p class="paragraph"/><h3>What is a page object?</h3><p class="paragraph"/>To truly decouple the functional intent of your tests from the raw Selenium interactions you can write 'page objects'. A page object represents a particular page within your application and defines methods and properties that allow your tests to interact with the page. The tests interact with the page objects, not directly with Selenium so they operate at a layer of abstraction from the fine details of the page. The advantages of this pattern include:
<ul class="star">
<li>Details of page can be refactored more easily as changes only need to be reflected in the page object, not the tests themselves.</li>
<li>Complex interactions can be modelled in methods on the page object, meaning they can be reused in multiple tests.</li>
<li>Navigation actions can be modelled as page object methods that return instances of other page objects representing the user's journey through the application.</li>
<li>Page objects are very easy to write, can be expanded as necessary and greatly enhance the simplicity and readability of your tests.</li>
</ul><p class="paragraph"/>When using the page object pattern your test classes will typically not interact directly with Selenium. Instead the page object classes themselves will do so. Page objects can use the <code>SeleniumAware</code> mixin to access Selenium just as tests can.
<h2><a name="4.1. Writing Page Object Classes">4.1. Writing Page Object Classes</a></h2>The following is a guide to writing page objects. It is not definitive and does not specify patterns that the Selenium RC plugin <em class="italic">requires</em> but rather those I have found effective. If you want to, or the nature of your app requires you to take a different approach then by all means do so.<p class="paragraph"/>Generally you should let the behaviour of the page object be guided by the tests that use it - i.e. don't write a gigantic page object with rich behaviour before you need it. It's very easy to refactor direct selenium calls out of a test and into page object methods as you go.<p class="paragraph"/><h3>Constructing page objects</h3><p class="paragraph"/>A good approach to constructing page objects is to have:
<ul class="star">
<li>A no-argument constructor that can be used by other page objects' navigation methods and expects the browser to already be on the right page.</li>
<li>A private constructor that opens the page by URL, i.e. as though the user had typed the URL in the browser's location bar or used a bookmark.</li>
<li>A factory method that calls the by-URL constructor but does not itself require the URL as an argument.</li>
</ul><p class="paragraph"/>The factory method might take parameters if the URL of the page can vary (e.g. the factory method for a Grails edit page might take a domain object's id and use it to construct a <code>/domainClass/edit/$id</code> style URL). The point is that ideally the page object should encapsulate the details of the URL so the tests don't have to know about it. For example:<p class="paragraph"/><div class="code"><pre>class HomePage &#123;
	<span class="java&#45;keyword">private</span> <span class="java&#45;keyword">static</span> <span class="java&#45;keyword">final</span> URL = <span class="java&#45;quote">"/home"</span><p class="paragraph"/>	// factory method that opens the home page
	<span class="java&#45;keyword">static</span> HomePage open() &#123;
		<span class="java&#45;keyword">return</span> <span class="java&#45;keyword">new</span> HomePage(URL)
	&#125;<p class="paragraph"/>	// constructor called by navigation methods in other page objects
	HomePage() &#123;
		verifyPage()
	&#125;<p class="paragraph"/>	// constructor called by the factory method
	<span class="java&#45;keyword">private</span> HomePage(<span class="java&#45;object">String</span> url) &#123;
		selenium.open(url)
		verifyPage()
	&#125;
&#125;<p class="paragraph"/>class SomeOtherPage &#123;
	// &#8230; constructors, etc.<p class="paragraph"/>	HomePage clickHomeLink() &#123;
		selenium.clickAndWait(<span class="java&#45;quote">"css=a&#35;home"</span>)
		<span class="java&#45;keyword">return</span> <span class="java&#45;keyword">new</span> HomePage() // uses the no&#45;arg constructor of HomePage
	&#125;
&#125;</pre></div><p class="paragraph"/><h3>Verifying the page</h3><p class="paragraph"/>Page objects should <em class="italic">not</em> make assertions; that is the job of the test. Page objects are there to provide the data and perform the actions that allow the test to do that job.<p class="paragraph"/>The only exception to this rule is that when constructing a new page object it is wise to do some kind of check to ensure the browser is actually on the page it should be. Typically this is done by checking something simple like the page title and throwing an exception if it is not correct. If the browser ends up on the wrong page the test has made an incorrect assumption about some aspect of navigation so an exception is appropriate. For example the <em class="italic">verifyPage</em> method referenced above could be implemented as:<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">private</span> void verifyPage() &#123;
	def title = selenium.title
	<span class="java&#45;keyword">if</span> (title != <span class="java&#45;quote">"Home"</span>) &#123;
		<span class="java&#45;keyword">throw</span> <span class="java&#45;keyword">new</span> UnexpectedPageException(<span class="java&#45;quote">"Expected home page but found '$title'"</span>)
	&#125;
&#125;</pre></div><p class="paragraph"/><blockquote class="note">
The class <code>grails.plugins.selenium.pageobjects.Page</code> provides public no-arg and protected URL-based constructors and an abstract <em class="italic">verifyPage</em> method so it is a good base for adopting this pattern.
</blockquote><p class="paragraph"/><h3>Navigation</h3><p class="paragraph"/>Navigation type methods in page objects will typically return another page object. When the navigation in question is deterministic this is as simple as:<p class="paragraph"/><div class="code"><pre>HomePage clickHomeLink() &#123;
	selenium.clickAndWait(<span class="java&#45;quote">"css=a&#35;home"</span>)
	<span class="java&#45;keyword">return</span> <span class="java&#45;keyword">new</span> HomePage()
&#125;</pre></div><p class="paragraph"/>Remember that the constructor of the <em class="italic">HomePage</em> class will check that the browser is on the correct page and throw an exception if it isn't.<p class="paragraph"/>When navigation can have different results in different circumstances the most effective approach is to implement multiple navigation methods that reflect this. Again, page objects that verify browser state in their constructors make this easy. For example, imagine and application where only a logged in user can click on the <em class="italic">"My Profile"</em> link, if an anonymous user does so they will be presented with the login page rather than their profile. Navigation methods that reflect this rule could be implemented like this:<p class="paragraph"/><div class="code"><pre>ProfilePage clickProfileLinkAsLoggedInUser() &#123;
	selenium.clickAndWait(<span class="java&#45;quote">"css=a&#35;profile"</span>)
	<span class="java&#45;keyword">return</span> <span class="java&#45;keyword">new</span> ProfilePage()
&#125;<p class="paragraph"/>LoginPage clickProfileLinkAsAnonymousUser() &#123;
	selenium.clickAndWait(<span class="java&#45;quote">"css=a&#35;profile"</span>)
	<span class="java&#45;keyword">return</span> <span class="java&#45;keyword">new</span> LoginPage()
&#125;</pre></div><p class="paragraph"/>Because the test knows the expected state, it can simply call the different methods in different circumstances.<p class="paragraph"/><h3>Refreshing the page</h3><p class="paragraph"/>You can consider a page refresh to be a navigation method. For example, if your page object caches the results of various observer methods yet you expect data to change if the page is refreshed then a simple method that calls <code>selenium.refreshAndWait()</code> then returns a new instance of the same page object class would work nicely.<p class="paragraph"/>Even if your page object does not cache any state, consider having such a method anyway (it can even just return <code>this</code>) so that refactoring is easier if you <em class="italic">do</em> start caching state.<p class="paragraph"/><h3>Observing the state of the page</h3><p class="paragraph"/>A page object class typically has methods that observe the state of the page, such as <em class="italic">getWidgetTitle</em> or <em class="italic">getHighlightedNavigationLink</em> etc. You implement these by grabbing data from the page using Selenium and converting where necessary into a more logical format for your tests to make assertions about. For example:<p class="paragraph"/><div class="code"><pre><span class="java&#45;object">String</span> getFlashMessage() &#123;
	hasFlashMessage() ? selenium.getText(<span class="java&#45;quote">"css=.message"</span>) : <span class="java&#45;keyword">null</span>
&#125;<p class="paragraph"/><span class="java&#45;object">boolean</span> hasFlashMessage() &#123;
	<span class="java&#45;keyword">return</span> selenium.isElementPresent(<span class="java&#45;quote">"css=.message"</span>)
&#125;</pre></div><p class="paragraph"/>Here the <em class="italic">hasFlashMessage</em> method is used by <em class="italic">getFlashMessage</em> to avoid the nasty exception that will get thrown if <em class="italic">getFlashMessage</em> attempts to get text on an element that does not exist. If the test <em class="italic">expects</em> no flash message it would be inappropriate to have to catch an exception in order to pass. The page object handles the fiddly details of the interaction with Selenium so the test can use expressive assertions such as:<p class="paragraph"/><div class="code"><pre>assertFalse page.hasFlashMessage()
assertNull page.flashMessage
assertEquals <span class="java&#45;quote">"Not logged in"</span>, page.flashMessage</pre></div><p class="paragraph"/><h3>List and table data</h3><p class="paragraph"/>Getting data from a list is a little awkward in Selenium. Again, by encapsulating such things in a page object they don't clutter up your tests. For example:<p class="paragraph"/><div class="code"><pre>List&#60;<span class="java&#45;object">String</span>&#62; getErrorMessages() &#123;
	def errorCount = selenium.getXpathCount(<span class="java&#45;quote">"//div&#91;@class='errors'&#93;/ul/li"</span>)
	<span class="java&#45;keyword">if</span> (errorCount &#62; 0) &#123;
		<span class="java&#45;keyword">return</span> (1..errorCount).collect &#123; i &#45;&#62;
			selenium.getText(<span class="java&#45;quote">"//div&#91;@class='errors'&#93;/ul/li&#91;$i&#93;"</span>)
		&#125;
	&#125; <span class="java&#45;keyword">else</span> &#123;
		<span class="java&#45;keyword">return</span> &#91;&#93;
	&#125;
&#125;</pre></div><p class="paragraph"/>This page object method returns a <em class="italic">List</em> of all the error messages displayed on the page or an empty list if there aren't any error messages. First it counts how many <em class="italic">li</em> elements appear inside the <em class="italic">"errors" div</em> using Selenium's <code>getXpathCount</code> method then applies <code>collect</code> to a Groovy range, calling Selenium's <code>getText</code> method for each <em class="italic">li</em> in turn. If the <code>getXpathCount</code> call returns zero the method simply returns an empty list.<p class="paragraph"/>The test now doesn't have to worry about how to scrape error messages from the page, it can make nice simple assertions such as:<p class="paragraph"/><div class="code"><pre>assertTrue page.errorMessages.isEmpty()
assertEquals 1, page.errorMessages.size()
assertThat page.errorMessages, hasItem(<span class="java&#45;quote">"Credit card number is invalid"</span>)</pre></div><p class="paragraph"/><blockquote class="note">
One caveat here is that <em class="italic">n+1</em> Selenium commands are executed every time you call <em class="italic">getErrorMessages</em> so when dealing with large lists it may be wise to lazy-initialise a private field in the page object the first time the method is called then simply return that value on subsequent calls. Groovy's <a href="http://groovy.codehaus.org/Lazy+transformation" target="blank">@Lazy</a> annotation can be used to good effect to achieve this.
</blockquote><p class="paragraph"/><h3>Interacting with the page</h3><p class="paragraph"/>Page objects will also frequently implement methods to allow the test to click buttons, type in fields and so on. These can be as simple as:<p class="paragraph"/><div class="code"><pre>void typePassword(<span class="java&#45;object">String</span> password) &#123;
	selenium.type(<span class="java&#45;quote">"css=input&#91;type=password&#93;"</span>, password)
&#125;</pre></div><p class="paragraph"/>More complex interactions such as dealing with AJAX functionality are also possible. Here's an example of performing an AJAX-enabled search:<p class="paragraph"/><div class="code"><pre><span class="java&#45;object">int</span> search(<span class="java&#45;object">String</span> query) &#123;
	selenium.type(<span class="java&#45;quote">"css=input&#91;name=q&#93;"</span>, query)
	selenium.click(css=input&#91;type=button&#93;)
	selenium.waitForElementPresent(<span class="java&#45;quote">"css=.searchResults"</span>)
	<span class="java&#45;keyword">return</span> selenium.getXpathCount(<span class="java&#45;quote">"//div&#91;@class='searchResults'&#93;/ul/li"</span>)
&#125;</pre></div><p class="paragraph"/>The method types the query, clicks the <em class="italic">search</em> button, then waits for a change of page state that indicates that the AJAX call has completed before finally returning the count of how many items were found.<p class="paragraph"/><blockquote class="note">
When waiting for AJAX completion it is vital that the condition you are waiting for is not true before the AJAX call begins otherwise the <em class="italic">waitFor...</em> could return immediately before anything actually happens. In the example above the call to <code>waitForElementPresent("css=.searchResults")</code> would not be appropriate if the <em class="italic">.searchResults</em> element might already be on the page. Getting this right is non-trivial but at least when using page objects you only have to get it right in one place!
</blockquote><p class="paragraph"/><h3>Leveraging Groovy with your page objects</h3><p class="paragraph"/>You can get quite creative by overriding Groovy's <code>methodMissing</code> and <code>propertyMissing</code> to get data from or interact with your pages. For example, overriding property setters on a page object to get the current value of and type in form fields whose <em class="italic">id</em> is the property name is as easy as:<p class="paragraph"/><div class="code"><pre>def propertyMissing(<span class="java&#45;object">String</span> name) &#123;
	<span class="java&#45;keyword">if</span> (!selenium.isElementPresent(name))
		<span class="java&#45;keyword">throw</span> <span class="java&#45;keyword">new</span> MissingPropertyException(name)
	&#125;
	<span class="java&#45;keyword">return</span> selenium.getValue(name)
&#125;<p class="paragraph"/>def propertyMissing(<span class="java&#45;object">String</span> name, value) &#123;
	<span class="java&#45;keyword">if</span> (!selenium.isElementPresent(name))
		<span class="java&#45;keyword">throw</span> <span class="java&#45;keyword">new</span> MissingPropertyException(name)
	&#125;
	selenium.type(name, value)
&#125;</pre></div><p class="paragraph"/>A test can then do this:<p class="paragraph"/><div class="code"><pre>// type in form fields using dynamic property access
page.username = <span class="java&#45;quote">"blackbeard"</span>
page.password = <span class="java&#45;quote">"yarr"</span><p class="paragraph"/>// get values from form fields using dynamic property access
assertThat page.username, equalTo(<span class="java&#45;quote">"blackbeard"</span>)</pre></div><p class="paragraph"/><h3>Page object scope</h3><p class="paragraph"/>Although the name <em class="italic">page objects</em> might encourage you to use a one-class-per-page approach this does not have to be the case. Sometimes it might be appropriate to create a single 'page object' class that actually models a group of pages (e.g. the CRUD pages for a particular domain class).<p class="paragraph"/>Likewise, for complex pages or modules that are used on a number of pages you should consider decomposing further to 'module objects'. For example:<p class="paragraph"/><div class="code"><pre>class NavigationModule &#123;
	List&#60;<span class="java&#45;object">String</span>&#62; getNavigationLinkNames() &#123; &#8230; &#125;
	<span class="java&#45;object">String</span> getHighlightedNavigationItem() &#123; &#8230; &#125;
	HomePage clickHomeLink() &#123; &#8230; &#125;
	ProfilePage clickUserProfileLink() &#123; &#8230; &#125;
	// etc.
&#125;<p class="paragraph"/>class HomePage &#123;
	NavigationModule getNavigationModule() &#123;
		<span class="java&#45;keyword">return</span> <span class="java&#45;keyword">new</span> NavigationModule()
	&#125;
	// &#8230; other methods <span class="java&#45;keyword">for</span> dealing with home page
&#125;<p class="paragraph"/>class ProfilePage &#123;
	NavigationModule getNavigationModule() &#123;
		<span class="java&#45;keyword">return</span> <span class="java&#45;keyword">new</span> NavigationModule()
	&#125;
	// &#8230; other methods <span class="java&#45;keyword">for</span> dealing with profile page
&#125;<p class="paragraph"/>class NavigationTests &#123;
	@Test whenNavigatingBetweenPagesTheCorrectNavElementIsHighlighted() &#123;
		def homepage = HomePage.open()
		assertThat homepage.navigationModule.highlightedNavigationItem, equalTo(<span class="java&#45;quote">"Home"</span>)<p class="paragraph"/>		def profilepage = homepage.navigationModule.clickUserProfileLink()
		assertThat profilepage.navigationModule.hightlightedNavigationItem, equalTo(<span class="java&#45;quote">"My Profile"</span>)
	&#125;
&#125;</pre></div><p class="paragraph"/>In this example both the home and profile pages share the same navigation module (perhaps as part of their <em class="italic">SiteMesh</em> template), so it makes sense that the code for interacting with that module is split out into its own class to avoid re-implementing all the navigation methods in both.
<h2><a name="4.2. Supplied Page Object Classes">4.2. Supplied Page Object Classes</a></h2>The plugin provides some base classes for page objects. These can be used as-is for simple scenarios, extended (or ignored completely of course). All the classes are in the <code>grails.plugins.selenium.pageobjects</code> package. Refer to the API documentation for more details.
<ul class="star">
<li><code>Page</code> is the root of the page object heirarchy. It provides no-arg and URL-based constructors and the abstract <em class="italic">verifyPage</em> method.</li>
<li><code>GrailsListPage</code> represents a scaffolded <em class="italic">list</em> page and provides easy access to data in a list table, access to the pagination controls, etc.</li>
<li><code>GrailsShowPage</code> represents a scaffolded <em class="italic">show</em> page and provides property access to data in a typical <em class="italic">show</em> page.</li>
<li><code>GrailsCreatePage</code> and <code>GrailsEditPage</code> represent scaffolded <em class="italic">create</em> and <em class="italic">edit</em> pages and translate <code>page.field = "value"</code> type calls to Selenium commands that type in form fields.</li>
<li><code>UnexpectedPageException</code> is an exception class thrown when a page object is constructed but the browser is not on the correct page.</li>
</ul><p class="paragraph"/><h1><a name="5. Data Driving Selenium Tests">5. Data Driving Selenium Tests</a></h1>One of the most important considerations when writing Selenium tests is how to set up the data that the tests require. If you are purely running your Selenium tests against <em class="italic">localhost</em> this is actually reasonably straightforward. Since the Selenium tests are running in the same JVM as the Grails application under test, the tests have direct access to the application's domain objects and can set up data very easily.<p class="paragraph"/><blockquote class="warning">
Data-driving using direct access to application domain classes is <strong class="bold">not</strong> appropriate when running Selenium tests against a remote application, i.e. when <code>selenium.remote = true</code> is set. In that case the Selenium tests and the application are running in separate JVMs.
</blockquote><p class="paragraph"/>For example:<p class="paragraph"/><div class="code"><pre>void testSongsAppearInList() &#123;
    Song.withTransaction &#123;
        <span class="java&#45;keyword">new</span> Song(title: <span class="java&#45;quote">"Heads Will Roll"</span>, artist: <span class="java&#45;quote">"Yeah Yeah Yeahs"</span>).save(failOnError: <span class="java&#45;keyword">true</span>)
        <span class="java&#45;keyword">new</span> Song(title: <span class="java&#45;quote">"Twilight Galaxy"</span>, artist: <span class="java&#45;quote">"Metric"</span>).save(failOnError: <span class="java&#45;keyword">true</span>)
        <span class="java&#45;keyword">new</span> Song(title: <span class="java&#45;quote">"I'm Confused"</span>, artist: <span class="java&#45;quote">"Handsome Furs"</span>).save(failOnError: <span class="java&#45;keyword">true</span>)
    &#125;
    selenium.open <span class="java&#45;quote">"$contextPath/song/list"</span>
    assertEquals 3, selenium.getXpathCount(<span class="java&#45;quote">"//table/tbody/tr"</span>)
&#125;</pre></div><p class="paragraph"/>Using a <code>withTransaction</code> block ensures you won't have problems with lazy-loading, failed data setup will get rolled back immediately and the data will be committed to the database before the browser hits the page. I also find that errors are reported better when data setup does fail.<p class="paragraph"/>Data can also be created in the <code>setUp</code> method of the test case in exactly the same way.<p class="paragraph"/><h3>Using the Build Test Data plugin</h3><p class="paragraph"/>The <a href="http://grails.org/plugin/build-test-data" target="blank">Build Test Data plugin</a> is very useful once your domain model goes beyond a trivial level of complexity and it can also be used directly in Selenium tests:<p class="paragraph"/><div class="code"><pre>void testSongsAppearInList() &#123;
    Song.withTransaction &#123;
        3.times &#123;
            Song.build() // assume we have some nice defaults in TestDataConfig.groovy
        &#125;
    &#125;
    selenium.open <span class="java&#45;quote">"$contextPath/song/list"</span>
    assertEquals 3, selenium.getXpathCount(<span class="java&#45;quote">"//table/tbody/tr"</span>)
&#125;</pre></div><p class="paragraph"/>An alternative to the build test data is the <a href="http://grails.org/plugin/fixtures" target="blank">Fixtures plugin</a> which can also be used directly from Selenium tests.<p class="paragraph"/><h3>Tearing data down</h3><p class="paragraph"/>The difficulty with data-driving Selenium tests like this is that unlike integration tests they are not run in a transactional context. Even if they were the problem would still arise as data modifications made using the browser (e.g. submitting an update form) would not be part of the <em class="italic">same</em> transaction that the test runs in. To keep your tests isolated from one another it is <em class="italic">critical</em> to use <code>tearDown</code> effectively to prevent data from one test 'bleeding over' into the next. With the examples above I could implement <code>tearDown</code> like this:<p class="paragraph"/><div class="code"><pre>void tearDown() &#123;
    <span class="java&#45;keyword">super</span>.tearDown()
    Song.withTransaction &#123;
        Song.list()&#42;.delete()
    &#125;
&#125;</pre></div><p class="paragraph"/>Again, the <code>withTransaction</code> block ensures that the deletes are flushed and committed to the database and that any problems deleting will get reported right away causing the test to fail.<p class="paragraph"/><h3>Test-wide data setup in JUnit 4 tests</h3><p class="paragraph"/>In Grails 1.3+ you can have set up and tear down methods that run before and after <em class="italic">all</em> tests in a class rather than each individual test by using <code>static void</code> methods with <a href="http://www.junit.org/apidocs/org/junit/BeforeClass.html" target="blank">&#64;BeforeClass</a> and <a href="http://www.junit.org/apidocs/org/junit/AfterClass.html" target="blank">&#64;AfterClass</a> annotations. Obviously this will not be appropriate for all test cases. In particular any tests that create or edit data may well have to use a per-method tear down. However, when appropriate it can be a good optimization.
<h1><a name="6. Other Test Frameworks">6. Other Test Frameworks</a></h1>Selenium tests do not have to be written as JUnit test cases. The <code>SeleniumAware</code> mixin could be applied to almost any test case written in another framework. Page objects are also agnostic of the test framework.<p class="paragraph"/>Currently the plugin has tested support for the <a href="http://grails.org/plugin/spock" target="blank">Spock</a> plugin. Also, when using Grails 1.3+ tests can be written using JUnit 4 conventions. Other testing frameworks such as <a href="http://www.easyb.org/" target="blank">EasyB</a> and <a href="http://jbehave.org/" target="blank">JBehave</a> may well work with a limited amount of effort.<p class="paragraph"/><h3>Writing Selenium tests with JUnit 4</h3><p class="paragraph"/>Grails 1.3+ uses JUnit 4 by default and although you can carry on writing tests as before JUnit 4 provides some nice enhancements such as the <code>assertThat</code> method that works the <a href="http://code.google.com/p/hamcrest/" target="blank">Hamcrest matcher</a> API.<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">import</span> org.junit.&#42;
<span class="java&#45;keyword">import</span> grails.plugins.selenium.&#42;
<span class="java&#45;keyword">import</span> <span class="java&#45;keyword">static</span> org.junit.Assert.&#42;
<span class="java&#45;keyword">import</span> <span class="java&#45;keyword">static</span> org.hamcrest.CoreMatchers.&#42;<p class="paragraph"/>@Mixin(SeleniumAware)
class HomepageTests &#123;
	@Test void userCanLoadHomepage() &#123;
		selenium.open <span class="java&#45;quote">"/"</span>
		assertThat selenium.title, equalTo(<span class="java&#45;quote">"Welcome to Grails"</span>)
	&#125;
&#125;</pre></div><p class="paragraph"/>Notice that the test annotates each test method with <a href="http://www.junit.org/apidocs/org/junit/Test.html" target="blank">&#64;Test</a> and does not extend a base class.<p class="paragraph"/><h3>Writing Selenium tests with Spock</h3><p class="paragraph"/>To write Selenium tests using Spock, simply create your specifications under <code>test/selenium</code> and (where necessary) use the <code>SeleniumAware</code> mixin then run tests as normal. For example:<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">import</span> spock.lang.&#42;
<span class="java&#45;keyword">import</span> grails.plugins.selenium.&#42;<p class="paragraph"/>@Mixin(SeleniumAware)
class HomepageSpecification <span class="java&#45;keyword">extends</span> Specification &#123;
    def <span class="java&#45;quote">"user can load application homepage"</span>() &#123;
        when:
            selenium.open(<span class="java&#45;quote">"/"</span>)
        then:
            selenium.isTextPresent(<span class="java&#45;quote">"Welcome to Grails"</span>)
    &#125;
&#125;</pre></div><p class="paragraph"/>You can isolate Spock Selenium tests with <code>grails test-app :spock-selenium</code> or <code>grails test-app functional:spock-selenium</code> just as you can for other test types.
<h1><a name="7. Extending GrailsSeleniumTestCase">7. Extending GrailsSeleniumTestCase</a></h1><blockquote class="warning">
The <code>GrailsSeleniumTestCase</code> class is considered deprecated. It is still available for backwards compatibility but will not be enhanced any further and may be removed in a future plugin version. The plugin now decorates the <a href="http://release.seleniumhq.org/selenium-remote-control/1.0-beta-2/doc/java/com/thoughtworks/selenium/Selenium.html" target="blank">Selenium</a> object itself with <em class="italic">waitFor</em> methods and the <a href="http://code.google.com/p/hamcrest/" target="blank">Hamcrest matcher</a> API provides a better alternative to the assertion methods provided by <code>SeleneseTestBase</code>.
</blockquote><p class="paragraph"/>Instead of using the <code>SeleniumAware</code> mixin you can extend <code>grails.plugins.selenium.GrailsSeleniumTestCase</code> which provides everything the mixin does with some additional capabilities. Firstly you can use some of the more advanced assertions provided by the <a href="http://release.seleniumhq.org/selenium-remote-control/1.0-beta-2/doc/java/com/thoughtworks/selenium/SeleneseTestBase.html" target="blank">SeleneseTestBase</a> class as well as the various <em class="italic">verify</em> methods, the <em class="italic">seleniumEquals</em> method, etc.<p class="paragraph"/><h3>Using <em class="italic">assert..._, _verify...</em> and <em class="italic">waitFor...</em> convenience methods</h3><p class="paragraph"/>Extending <code>GrailsSeleniumTestCase</code> enables you to directly <em class="italic">assert, verify</em> or <em class="italic">waitFor</em> certain Selenium conditions. Any <a href="http://release.seleniumhq.org/selenium-remote-control/1.0-beta-2/doc/java/com/thoughtworks/selenium/Selenium.html" target="blank">Selenium</a> method starting with <em class="italic">is</em> can be used as a boolean assertion by replacing the <em class="italic">is</em> with <em class="italic">assert, verify</em> or <em class="italic">waitFor</em> in the method call. Likewise any Selenium method starting with <em class="italic">get</em> can be used as an equality assertion. Some examples:<p class="paragraph"/><div class="code"><pre>assertTrue selenium.isTextPresent(<span class="java&#45;quote">"Welcome to Grails"</span>)      // normal form
assertTextPresent(<span class="java&#45;quote">"Welcome to Grails"</span>)                      // using GrailsSeleniumTestCase<p class="paragraph"/>verifyTrue selenium.isVisible(<span class="java&#45;quote">"myElement"</span>)                  // normal form
verifyVisible(<span class="java&#45;quote">"myElement"</span>)                                  // using GrailsSeleniumTestCase<p class="paragraph"/>waitForAlertPresent()<p class="paragraph"/>assertEquals <span class="java&#45;quote">"Expected text"</span>, selenium.getText(<span class="java&#45;quote">"myElement"</span>) // normal form
assertText(<span class="java&#45;quote">"Expected text"</span>, <span class="java&#45;quote">"myElement"</span>)                    // using GrailsSeleniumTestCase<p class="paragraph"/>waitForXpathCount 3, <span class="java&#45;quote">"//ul/li"</span></pre></div><p class="paragraph"/>You can also use <em class="italic">assertNot..._, _verifyNot...</em> and <em class="italic">waitForNot...</em> to test negated conditions.
<h1><a name="8. Selenium RC and Continuous Integration">8. Selenium RC and Continuous Integration</a></h1>_Documentation coming soon._
         			
		</div>
		<div id="footer">
			  
		</div>	
	</body>
</html>